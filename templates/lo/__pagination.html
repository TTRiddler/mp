{% if is_paginated %}
<a {% if not prev_url %} disabled {% endif %} href="{{ prev_url }}">
    <span>&laquo;</span>
</a>
{% if page_object.number|add:'-3' in page_object.paginator.page_range %}
    <a href="?page=1">1</a>
{% endif %}

{% if page_object.number|add:'-4' in page_object.paginator.page_range %}
    <a disabled href="#">...</a>
{% endif %}

{% for n in page_object.paginator.page_range %}
    {% if page_object.number == n %}
        <a href="?page={{ n }}" class="pag-active">{{ n }}</a>
    {% elif n > page_object.number|add:'-3' and n < page_object.number|add:'3' %}
        <a href="?page={{ n }}">{{ n }}</a>
    {% endif %}
{% endfor %}

{% if page_object.number|add:'4' in page_object.paginator.page_range %}
    <a disabled href="#">...</a>
{% endif %}

{% if page_object.number|add:'3' in page_object.paginator.page_range %}
    <a href="?page={{ page_object.paginator.num_pages }}">{{ page_object.paginator.num_pages }}</a>
{% endif %}

<a {% if not next_url %} disabled {% endif %} href="{{ next_url }}">
    <span>&raquo;</span>
</a>
    
{% endif %}